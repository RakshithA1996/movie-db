{"ast":null,"code":"var _jsxFileName = \"/home/rakshith/Git Projects/movie-db/src/routes/home.js\";\nimport React from 'react';\nimport { Component } from 'react';\nimport { toast } from \"react-toastify\";\nimport BannerCarosel from '../components/bannerCarosel';\nimport Header from \"../components/header\";\nimport PopularMovies from '../components/popularMovies';\nimport TopRatedMovies from '../components/topRatedMovies';\nimport UpcommingMovies from '../components/upcommingMovies';\nimport VideoModal from '../components/videoModal';\n\nclass home extends Component {\n  constructor() {\n    super();\n\n    this.getSearchApiDetails = () => {\n      const {\n        Offset,\n        searchArray,\n        Limit\n      } = this.state;\n      let api_key = \"dcd90828f3169240a4e9b818d289b221\";\n      fetch(`https://api.themoviedb.org/3/search/movie?api_key=${api_key}&language=en-US&query='${this.state.search}'&page=1&include_adult=false`, {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        }\n      }).then(res => res.json()).then(res => {\n        if (res.results && res.results) {\n          this.setState({\n            Limit: Limit + 1,\n            Offset: Limit + 1,\n            searchArray: Offset === 1 ? res.results : [...searchArray, ...res.results],\n            hasMore: res.results.length > 9 ? true : false\n          });\n        } else {\n          toast.error(res.message);\n        }\n      }).catch(err => toast.error(err.message));\n    };\n\n    this.getPosterImage = id => {\n      let api_key = \"dcd90828f3169240a4e9b818d289b221\";\n      var vKey;\n      fetch(`https://api.themoviedb.org/3/movie/${id}/videos?api_key=${api_key}&language=en-US`, {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        }\n      }).then(res => res.json()).then(res => {\n        this.setState({\n          videoURL: res.results[0] && res.results[0].key\n        }, () => {\n          console.log(this.state.videoURL);\n        });\n      }).catch(err => toast.error(err.message));\n    };\n\n    this.setMovieId = (id, details) => {\n      this.setState({\n        videoDetails: details,\n        search: \"\"\n      }, () => {\n        this.getPosterImage(id);\n      });\n    };\n\n    this.setSearchParams = e => {\n      this.setState({\n        searchArray: [],\n        search: e.target.value\n      }, () => {\n        if (this.state.search !== \"\") {\n          this.getSearchApiDetails();\n        } else {\n          return;\n        }\n      });\n    };\n\n    this.closeModal = () => {\n      this.setState({\n        videoURL: \"\"\n      });\n    };\n\n    this.state = {\n      search: \"\",\n      searchArray: [],\n      Length: 0,\n      Offset: 1,\n      Limit: 1,\n      hasMore: false,\n      navBg: false,\n      videoURL: \"\",\n      videoDetails: {}\n    };\n  }\n\n  componentDidMount() {\n    window.onscroll = () => {\n      if (document.documentElement.scrollTop > 100) {\n        this.setState({\n          navBg: true\n        });\n      } else {\n        this.setState({\n          navBg: false\n        });\n      }\n    };\n  }\n\n  render() {\n    const {\n      navBg,\n      searchArray,\n      search,\n      videoURL,\n      videoDetails\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"home\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Header, {\n      setSearchParams: this.setSearchParams,\n      navBg: navBg,\n      searchArray: searchArray,\n      search: search,\n      setMovieId: this.setMovieId,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(BannerCarosel, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(PopularMovies, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(UpcommingMovies, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(TopRatedMovies, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 17\n      }\n    }), videoURL !== \"\" ? /*#__PURE__*/React.createElement(VideoModal, {\n      url: videoURL,\n      closeModal: this.closeModal,\n      videoDetails: videoDetails,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 21\n      }\n    }) : \"\");\n  }\n\n}\n\nexport default home;","map":{"version":3,"sources":["/home/rakshith/Git Projects/movie-db/src/routes/home.js"],"names":["React","Component","toast","BannerCarosel","Header","PopularMovies","TopRatedMovies","UpcommingMovies","VideoModal","home","constructor","getSearchApiDetails","Offset","searchArray","Limit","state","api_key","fetch","search","method","headers","then","res","json","results","setState","hasMore","length","error","message","catch","err","getPosterImage","id","vKey","videoURL","key","console","log","setMovieId","details","videoDetails","setSearchParams","e","target","value","closeModal","Length","navBg","componentDidMount","window","onscroll","document","documentElement","scrollTop","render"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Component } from 'react';\nimport { toast } from \"react-toastify\";\nimport BannerCarosel from '../components/bannerCarosel';\nimport Header from \"../components/header\";\nimport PopularMovies from '../components/popularMovies';\nimport TopRatedMovies from '../components/topRatedMovies';\nimport UpcommingMovies from '../components/upcommingMovies';\nimport VideoModal from '../components/videoModal';\n\nclass home extends Component {\n    constructor() {\n        super();\n        this.state = {\n            search:\"\",\n            searchArray:[],\n            Length: 0,\n            Offset: 1,\n            Limit: 1,\n            hasMore: false,\n            navBg:false,\n            videoURL:\"\",\n            videoDetails:{}\n        }\n    }\n\n    componentDidMount() {\n        window.onscroll = () => {\n            if (document.documentElement.scrollTop > 100) {\n              this.setState({ navBg: true });\n            } else {\n              this.setState({ navBg: false });\n            }\n        };\n    }\n\n    getSearchApiDetails = () => {\n        const {Offset, searchArray, Limit} = this.state;\n        let api_key = \"dcd90828f3169240a4e9b818d289b221\"\n        fetch(`https://api.themoviedb.org/3/search/movie?api_key=${api_key}&language=en-US&query='${this.state.search}'&page=1&include_adult=false`, {\n            method: \"GET\",\n            headers: {\n                \"Content-Type\": \"application/json\",\n            },\n        })\n        .then((res) => res.json())\n        .then((res) => {\n            if(res.results && res.results){\n                this.setState({\n                    Limit:Limit + 1,\n                    Offset:Limit + 1,\n                    searchArray:\n                    Offset === 1\n                    ? res.results\n                    : [...searchArray, ...res.results],\n                    hasMore: res.results.length > 9 ? true : false\n                })\n            }else{\n                toast.error(res.message);\n            }\n        })\n        .catch((err) => toast.error(err.message));\n    }\n\n    getPosterImage = (id) => {\n        let api_key = \"dcd90828f3169240a4e9b818d289b221\";\n        var vKey;\n        fetch(`https://api.themoviedb.org/3/movie/${id}/videos?api_key=${api_key}&language=en-US`, {\n            method: \"GET\",\n            headers: {\n                \"Content-Type\": \"application/json\",\n            },\n        })\n        .then((res) => res.json())\n        .then((res) => {\n            this.setState({videoURL:res.results[0] && res.results[0].key},()=>{console.log(this.state.videoURL)});\n        })\n        .catch((err) => toast.error(err.message));\n    }\n\n    setMovieId = (id, details) => {\n        this.setState({videoDetails:details,search:\"\"},()=>{\n            this.getPosterImage(id);\n        })\n    }\n\n    setSearchParams = (e) => {\n        this.setState({searchArray:[],search:e.target.value},()=>{\n            if(this.state.search !== \"\"){\n                this.getSearchApiDetails();\n            }else{\n                return;\n            }\n        })\n    }\n\n    closeModal = () => {\n        this.setState({videoURL:\"\"});\n    }\n\n    render() {\n        const {navBg,searchArray,search,videoURL,videoDetails} =this.state;\n        return (\n            <div className=\"home\">\n                <Header \n                    setSearchParams={this.setSearchParams} \n                    navBg={navBg} \n                    searchArray={searchArray}\n                    search={search}\n                    setMovieId={this.setMovieId}\n                />\n                <BannerCarosel />\n                <PopularMovies />\n                <UpcommingMovies />\n                <TopRatedMovies />\n                {videoURL !== \"\" ?\n                    <VideoModal url={videoURL} closeModal={this.closeModal} videoDetails={videoDetails} />\n                    : \"\"\n                }\n            </div>\n        )\n    }\n}\n\nexport default home;"]},"metadata":{},"sourceType":"module"}